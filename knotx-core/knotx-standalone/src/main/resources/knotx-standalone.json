{
  "verticles": {
    "com.cognifide.knotx.server.KnotxServerVerticle": {
      "config": {
        "http.port": 8092,
        "displayExceptionDetails": true,
        "allowed.response.headers": [
          "referer",
          "user-agent",
          "from",
          "content-type",
          "content-length",
          "accept-charset",
          "accept-encoding",
          "accept-language",
          "accept",
          "host",
          "if-match",
          "if-none-match",
          "if-range",
          "if-unmodified-since",
          "if-modified-since",
          "max-forwards",
          "proxy-authorization",
          "proxy-connection",
          "range",
          "cookie",
          "cq-action",
          "cq-handle",
          "handle",
          "action",
          "cqstats",
          "depth",
          "translate",
          "expires",
          "date",
          "dav",
          "ms-author-via",
          "if",
          "destination",
          "access-control-allow-origin",
          "x-original-requested-uri",
          "x-solr-core-key",
          "x-language-code",
          "x-requested-with",
          "location",
          "set-cookie"
        ],
        "repositories": [
          {
            "path": "/content/local/.*",
            "address": "knotx.core.repository.filesystem"
          },
          {
            "path": "/content/.*",
            "address": "knotx.core.repository.http"
          }
        ],
        "splitter": {
          "address": "knotx.core.splitter"
        },
        "routing": {
          "GET": [
            {
              "path": "/content/.*",
              "address": "knotx.knot.view"
            }
          ]
        }
      }
    },
    "com.cognifide.knotx.repository.HttpRepositoryVerticle": {
      "config": {
        "address": "knotx.core.repository.http",
        "client.options": {
          "maxPoolSize": 1000,
          "keepAlive": false,
          "tryUseCompression": true
        },
        "client.destination": {
          "domain": "localhost",
          "port": 3001
        }
      }
    },
    "com.cognifide.knotx.repository.FilesystemRepositoryVerticle": {
      "config": {
        "address": "knotx.core.repository.filesystem",
        "catalogue": ""
      }
    },
    "com.cognifide.knotx.splitter.FragmentSplitterVerticle": {
      "config": {
        "address": "knotx.core.splitter"
      }
    },
    "com.cognifide.knotx.knot.view.ViewKnotVerticle": {
      "config": {
        "address": "knotx.knot.view",
        "template.debug": true,
        "client.options": {
          "maxPoolSize": 1000,
          "keepAlive": false
        },
        "services": [
          {
            "name" : "first-service",
            "address" : "knotx.adapter.service.http",
            "params": {
              "path": "/service/mock/first.json"
            },
            "cacheKey": "first"
          },
          {
            "name" : "second-service",
            "address" : "knotx.adapter.service.http",
            "params": {
              "path": "/service/mock/second.json"
            }
          },
          {
            "name" : "third-service",
            "address" : "knotx.adapter.service.http",
            "params": {
              "path": "/service/mock/third.json"
            }
          },
          {
            "name" : "labelsRepository",
            "address" : "knotx.adapter.service.http",
            "params": {}
          }
        ]
      }
    },
    "com.cognifide.knotx.knot.action.ActionKnotVerticle" : {
      "config" : {
        "address": "knotx.knot.action",
        "adapters": [
          {
            "name": "step1",
            "address": "knotx.adapter.action.http",
            "params": {
              "path": "/service/mock/post-step-1.json"
            },
            "allowed.request.headers": [
              "Cookie"
            ],
            "allowed.response.headers": [
              "Set-Cookie",
              "Location"
            ]
          },
          {
            "name": "step2",
            "address": "knotx.adapter.action.http",
            "params": {
              "path": "/service/mock/post-step-2.json"
            },
            "allowed.request.headers": [
              "Cookie"
            ],
            "allowed.response.headers": [
              "Set-Cookie",
              "Location"
            ]
          }
        ],
        "formIdentifierName": "_frmId"
      }
    },
    "com.cognifide.knotx.adapter.service.http.HttpServiceAdapterVerticle" :{
      "config": {
        "address": "knotx.adapter.service.http",
        "client.options": {
          "maxPoolSize": 1000,
          "keepAlive": false
        },
        "services": [
          {
            "path": "/service/mock/.*",
            "domain": "localhost",
            "port": 3000,
            "allowed.request.headers": [
              "Content-Type",
              "X-*"
            ]
          },
          {
            "path": "/service/.*",
            "domain": "localhost",
            "port": 8080,
            "allowed.request.headers": [
              "Content-Type",
              "X-*"
            ]
          }
        ]
      }
    }
  }
}
